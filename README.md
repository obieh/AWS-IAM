# AWS-IAM
### This project will demonstrate how to create IAM in AWS.

### AWS IAM (Identity and Access Management) is a web service that allows you to manage access to AWS resources securely. It enables you to control who can access which AWS services and resources, and under what conditions. Essentially, IAM helps you manage users, security credentials (like access keys), and permissions to control access to your AWS environment.

## Benefits of IAM

### Centralized Management:
IAM allows you to centrally manage users, groups, roles, and permissions within your AWS account. 
### Authentication and Authorization:
It handles authentication (verifying who you are) and authorization (determining what you're allowed to do). 
### Fine-grained Access Control:
IAM enables you to grant very specific permissions, allowing users to access only the resources they need and nothing more. 
### No Additional Charge:
IAM is a core AWS service and is offered at no additional cost. 
### Key Concepts in IAM:
* Users: Individual accounts with permissions to access AWS resources. 
* Groups: Collections of users that share the same permissions. 
* Roles: Entities that can be assumed by trusted identities (users or applications) to grant them temporary permissions. 
* Policies: Documents that define permissions. They specify what actions a user, group, or role is allowed to perform on which AWS resources. 

## Project setup.

* Headover to your AWS acount

![](./img/Pasted%20image.png)

* Navigate to IAM, you do so by using the search bar. Type 'iam' and enter to search.

![](./img/Pasted%20image%20(2).png)


### Create IAM Users.

#### We will create a policy, create group and associate this policy with the group(role based), then create users and add the users to the groups.The policies will be for developer and data analyst groups respectively.

### Create policy for developers group.

* On the IAM page click on 'policies' to begin creating a new policy.

![](./img/Pasted%20image%20(4).png)

* On the policies page, click 'create policy', top right. Search for EC2 and check 'All EC2 actions (ec2:*)'. Recall that developers will need access to EC2 instance in this case.

![](./img/Pasted%20image%20(5).png)

* Scroll down to 'Resources' and select 'All' radio button then click 'next'

![](./img/Pasted%20image%20(6).png)

* Add a policy name 'devlopers'. Add a description if you want.

![](./img/Pasted%20image%20(7).png)

* Scroll down the page and click 'Create policy'

![](./img/Pasted%20image%20(8).png)

* You should a success page as below.

![](./img/Pasted%20image%20(9).png)

### Create policy for data analyst group.

* On the policies page click 'Create policy'

![](./img/Pasted%20image%20(4).png)

* Click 'Select a service' drop down and select S3 service. Check the 'All S3 action' box.

![](./img/Pasted%20image%20(10).png)

* Scroll down click 'All' resources button and click 'next'

![](./img/Pasted%20image%20(11).png)

* Add a policy name 'analyst'. Provide a description(optional) and click 'create policy'

![](./img/Pasted%20image%20(12).png)

* You should see a success page indicating the policy creation was a success.

![](./img/Pasted%20image%20(13).png)

### Create group for development team.

* On the IAM GUI console select "User group" and on the right click 'Create group'

![](./img/Pasted%20image%20(14).png)

* For the user group name type 'development-team'.

![](./img/Pasted%20image%20(15).png)

* On 'Attach permissions policies - Optional' search for the developers policy created earlier, check the box and click 'Create user group'.

![](./img/Pasted%20image%20(16).png)

* A success page should come up if all things are equal

![](./img/Pasted%20image%20(17).png)

### Create group for the data analyst team

* On the IAM GUI console select "User group" and on the right click 'Create group'

![](./img/Pasted%20image%20(14).png)

* For the user group name type 'analyst-team'.

![](./img/Pasted%20image%20(18).png)

* On 'Attach permissions policies - Optional' search for the analyst policy created earlier, check the box and click 'Create user group'.

![](./img/Pasted%20image%20(19).png)

* You should a success page and a list of the groups you have created.

![](./img/Pasted%20image%20(20).png)

### Create IAM user for John. Recall that john is a developer and should be in the Development-Team group.

* Head over to the IAM dashboard, select 'Users' and click 'Create user'.

![](./img/Pasted%20image%20(21).png)

* Type 'John' for username. Check the access to AWS Management Console. John as developer will need programmatic access. Select 'I want to create an IAM user'.

![](./img/Pasted%20image%20(22).png)

* You can select Autogenerated or custom password, check 'user must create a new password' and click next

![](./img/Pasted%20image%20(23).png)

* Click 'Add user to group' in the permission options and select the development-team group created earlier in user groups. Click 'next'.

![](./img/Pasted%20image%20(24).png)

* On the review page, we can see that John will have the development-team permission(Custom Managed) and IAMUserChangePassword permission(AWS managed) because option of user must change password was selected. Review and click 'create user'

![](./img/Pasted%20image%20(25).png)

* A success page should popup. Be sure to download user lofin detail in .csv file. This file will be sent to john.

![](./img/Pasted%20image%20(26).png)

### Create IAM user for Mary. Recall that Mary is a data analyst and should be in the Analyst-Team group.* A success page should popup. Be sure to download user lofin detail in .csv file. This file will be sent to john.

* Head over to the IAM dashboard, select 'Users' and click 'Create user'.

![](./img/Pasted%20image%20(21).png)

* Type 'Mary' for username. Check the access to AWS Management Console. Mary is a data analyst. Select 'I want to create an IAM user'.

![](./img/Pasted%20image%20(27).png)

* You can select Autogenerated or custom password, check 'user must create a new password' and click next.

![](./img/Pasted%20image%20(23).png)

* Click 'Add user to group' in the permission options and select the analyst-team group created earlier in user groups. Click 'next'.

![](./img/Pasted%20image%20(28).png)

* On the review page, we can see that Mary will have the analyst-team permission(Custom Managed) and IAMUserChangePassword permission(AWS managed) because option of user must change password was selected. Review and click 'create user'

![](./img/Pasted%20image%20(29).png)

* A success page should popup. Be sure to download user lofin detail in .csv file. This file will be sent to Mary.

![](./img/Pasted%20image%20(30).png)

## Testing and Validation

### Testing John's Access.

* Signout as root user from AWS console and sign-in as John.

![](./img/Pasted%20image%20(32).png)

* John will change his password logging in for the first time.

![](./img/Pasted%20image%20(33).png)

* Password Reset Confirmation page comes up. Click 'continue to sign in'

![](./img/Pasted%20image%20(34).png)

* John's AWS IAM account already shows that some services access are denied. Recall that John as a developer has EC2 full access only.

![](./img/Pasted%20image%20(35).png)

* Launch EC2 instance to confirm John's access. Click EC2 or use the search bar on John's AWS account. 'Click lanch instance'

![](./img/Pasted%20image%20(36).png)

* Fill in required server details, name, OS image, instance type and click 'Launch instance'

![](./img/Pasted%20image%20(37).png)

* Success page shows like this.

![](./img/Pasted%20image%20(38).png)

* Go to John's EC2 dashboard or click view all instance to see details of the EC2 instance created using John's IAM account.

* Indeed John has full EC2 instance access as the machine is up and running.

![](./img/Pasted%20image%20(39).png)

* Now lets see if John has any other access. Lets create S3 bucket from john's account. While in John's account, navigate to S3 AWS service.

![](./img/Pasted%20image%20(43).png)

* Click on 'Create bucket' at the top right of the GUI.

![](./img/Pasted%20image%20(44).png)

* Provide a name for the bucket(john-bucket)

![](./img/Pasted%20image%20(45).png)

* Scroll down and click 'Create bucket'.

![](./img/Pasted%20image%20(46).png)

* S3 Bucket creation failed indeed as john does not the required permission.

![](./img/Pasted%20image%20(47).png)

### Testing Mary's Access.

* Sign-out as John, then sign-n as mary.

![](./img/Pasted%20image%20(48).png)

* Mary must reset password at first login. 

![](./img/Pasted%20image%20(49).png)

* Password reset success page pops up. Click 'continue to sign in'.

![](./img/Pasted%20image%20(50).png)

* As we can see on Mary's AWS-IAM account that many AWS services access are denied. Click S3 to create a buck. Recall that mary as a data analyst has been given access to S3 bucket service.

![](./img/Pasted%20image%20(51).png)

* Click 'Create bucket' towards the top right.

![](./img/Pasted%20image%20(52).png)

* Add a bucket name, scroll down and click 'Create bucket'.

![](./img/Pasted%20image%20(55).png)
![](./img/Pasted%20image%20(54).png)

* Indeed, mary has full permission to S3 bucket as the bucket was created successfully.

![](./img/Pasted%20image%20(56).png)

* To further test mary's permission. Click the bucket mary created to upload files. You will see that the bucket is empty.

![](./img/Pasted%20image%20(57).png)

* Click 'upload' to begin file upload to the bucket.

![](./img/Pasted%20image%20(58).png)

* Choose either 'Add files' or 'Add folder' in this case 'Add file'. Navigate to the location of file to upload and select.

![](./img/Pasted%20image%20(59).png)

* Scroll down to the page bottom and click upload

![](./img/Pasted%20image%20(60).png)

* Mary can upload file into the S3 bucket as shown below.

![](./img/Pasted%20image%20(61).png)

* Lets test if mary have permission to use EC2 intance service. Type Ec2 on the search bar while still logged in as Mary. 

![](./img/Pasted%20image%20(62).png)

* Click launch instance, towards the top right.

![](./img/Pasted%20image%20(63).png)

* Type a server name, select OS image and click 'Launch instance'

![](./img/Pasted%20image%20(64).png)

* And as expected, Mary can not launch EC2 instance as there is no permission for services like key-pair, VPC, Subnet, IP etc. These services are essential to create EC2 instance.

![](./img/Pasted%20image%20(65).png)

## Multi-Factor Authentication(MFA).
### Multi-factor authentication (MFA) is a security method that requires users to provide more than one form of identification to access an account or system. Instead of relying solely on a username and password, MFA adds extra layers of security by incorporating additional verification steps. 

### Setting Up MFA for John
* Login as root user into your AWS management console. Click on IAM, if not found use the search bar.

![](./img/Pasted%20image%20(66).png)

* on the IAM page click 'Users'

![](./img/Pasted%20image%20(67).png)

* Click John for the list of users

![](./img/Pasted%20image%20(68).png)

* Click 'Enabled without MFA' in Console access to enable MFA.

![](./img/Pasted%20image%20(69).png)

* Click 'Enable MFA' to setup MFA for John.Add MFA device name and selector Authenticator app and click 'next'

![](./img/Pasted%20image%20(71).png)

* Open the authenticator app on your device and scan the QR  code. Then enter the codes from your device on the AWS MFA GUI page.

![]()

* You should see a success page indicating

![](./img/Pasted%20image%20(72).png)




## Project reflection

### Role of IAM in AWS

#### Identity and Access Management (IAM) in AWS is a framework that controls who (identities) can perform what actions (access) on which resources in an AWS environment. It ensures secure and granular access to AWS services by:

* Authenticating users (via usernames/passwords, MFA, or federated identities).
* Authorizing actions through policies (defining permissions like Allow or Deny for specific resources).

* Managing users, groups, roles, and policies centrally.

#### Contributions to Security & Efficiency:
* Security: Prevents unauthorized access via least privilege, audit trails (via AWS CloudTrail), and multi-factor authentication (MFA).

* Efficiency: Simplifies resource management by grouping permissions (e.g., assigning policies to groups instead of individual users).

### IAM Users vs. IAM Groups

| IAM Users    | IAM Groups |
| -------- | ------- |
| Individual identities (e.g., john, mary) with unique credentials. | Collections of IAM users (e.g., developer-team, analyst-team).   |
| Permissions can be assigned directly via policies. | Permissions are inherited by users in the group (no direct group login).     |

### When to Use Each:
* Create IAM Users: For unique individuals needing distinct access (e.g., john as a developer with SSH keys for EC2).

* Use IAM Groups: To manage permissions at scale (e.g., assign AmazonS3FullAccess to the analyst-team group instead of each user individually).

### Example:

* A new developer joins → Add them to the developer-team group to inherit EC2 permissions.

* A contractor needs temporary S3 access → Create a user with an inline policy (no group needed).

### Process of Creating Custom IAM Policies
#### Steps to Create a Custom Policy:

1. Define Purpose: Identify the role’s needs (e.g., "Read-only access to S3 buckets in Finance").

2. Navigate to IAM Console: Go to Policies → Create Policy.

3. Choose Service & Permissions:
   * Select a service (e.g., S3)
   * Specify actions (e.g., s3:GetObject, s3:ListBucket).
   * Limit resources via ARNs (e.g., arn:aws:s3:::finance-bucket/*).
4. Review & Name: Add a descriptive name (e.g., FinanceS3ReadOnly).
5. Attach to Identity: Assign to a user/group/role (e.g., attach to the auditors group).

```json
{
  "Version": "2012-10-17",
  "Statement": [{
    "Effect": "Allow",
    "Action": ["s3:GetObject", "s3:ListBucket"],
    "Resource": "arn:aws:s3:::finance-bucket/*"
  }]
}
```
### Principle of Least Privilege (PoLP)

#### Definition: Grant only the minimum permissions necessary to perform a task.

#### Importance in AWS:
* Reduces Attack Surface: Limits damage from compromised credentials (e.g., a hacker can’t delete all S3 buckets if the user only has read access).

* Compliance: Meets regulatory requirements (e.g., GDPR, HIPAA) by restricting unnecessary data access.

* Auditability: Simplifies tracking actions (e.g., CloudTrail logs show precise permissions used).

#### Implementation: Start with minimal permissions and expand as needed (e.g., use AWS Access Advisor to refine policies).

### Scenario Reflection: John & Mary

#### Configurations:
* John (Developer):
   * Group: developer-team with AmazonEC2FullAccess.
   * Alignment: Developers need to create/modify EC2 instances for app deployment. Full EC2 access aligns with their role but could be refined (e.g., restrict to specific instances).
* Mary (Data Analyst):
   * Group: analyst-team with AmazonS3FullAccess.
   * Alignment: Analysts require S3 access for datasets but rarely need full control (e.g., read-only might suffice).

#### Principle of Least Privilege:

* John: Could be restricted to specific EC2 instances (e.g., by tagging) to prevent accidental termination of production instances.

* Mary: Should have S3 permissions scoped to specific buckets (e.g., analytics-bucket) and limited to GetObject.

